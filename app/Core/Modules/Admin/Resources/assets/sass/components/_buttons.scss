$button-types: (
    primary: (
        color: var(--background),
        background: var(--text),
        hover-background: var(--text-200),
        hover-color: var(--background)
    ),
    accent: (
        color: var(--accent-900),
        background: var(--accent),
        hover-background: var(--accent-400),
        hover-color: var(--accent-900)
    ),
    secondary: (
        color: var(--text),
        background: var(--transp-1),
        hover-background: var(--transp-2),
        hover-color: var(--text)
    ),
    error: (
        color: var(--error),
        background: var(--error-light),
        hover-background: rgba(255, 59, 48, 0.2),
        hover-color: var(--error)
    ),
    success: (
        color: var(--success),
        background: var(--success-light),
        hover-background: rgba(48, 209, 88, 0.2),
        hover-color: var(--success)
    ),
    warning: (
        color: var(--warning),
        background: var(--warning-light),
        hover-background: rgba(255, 149, 0, 0.2),
        hover-color: var(--warning)
    ),
    info: (
        color: var(--info),
        background: var(--info-light),
        hover-background: rgba(90, 200, 250, 0.2),
        hover-color: var(--info)
    )
);

$button-outline-types: (
    primary: (
        color: var(--text),
        border-color: var(--transp-2),
        hover-background: var(--transp-1),
        hover-color: var(--text)
    ),
    accent: (
        color: var(--accent),
        border-color: var(--accent-transp, rgba(50, 215, 75, 0.3)),
        hover-background: var(--accent-transp, rgba(50, 215, 75, 0.1)),
        hover-color: var(--accent)
    ),
    error: (
        color: var(--error),
        border-color: var(--error-light),
        hover-background: var(--error-light),
        hover-color: var(--error)
    ),
    success: (
        color: var(--success),
        border-color: var(--success-light),
        hover-background: var(--success-light),
        hover-color: var(--success)
    ),
    warning: (
        color: var(--warning),
        border-color: var(--warning-light),
        hover-background: var(--warning-light),
        hover-color: var(--warning)
    )
);

$sizes: (
    tiny: (
        padding: 0.375rem 0.75rem,
        font-size: 0.75rem,
        svg-size: 0.875rem
    ),
    small: (
        padding: 0.5rem 1rem,
        font-size: 0.8125rem,
        svg-size: 1rem
    ),
    medium: (
        padding: 0.625rem 1.25rem,
        font-size: 0.875rem,
        svg-size: 1.125rem
    ),
    large: (
        padding: 0.75rem 1.5rem,
        font-size: 0.9375rem,
        svg-size: 1.25rem
    )
);

@mixin button-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: var(--transp-1);
    color: var(--text);
    border: none;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.5;
    white-space: nowrap;
    cursor: pointer;
    transition: all 0.15s ease;
    position: relative;
    width: max-content;

    &:focus {
        outline: none;
    }

    &:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
    }

    &:hover:not(:disabled):not([aria-busy="true"]) {
        transform: translateY(-1px);
    }

    &:active:not(:disabled) {
        transform: translateY(0);
    }

    &[aria-busy="true"] {
        opacity: 0.7;
        pointer-events: none;
    }

    &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
    }

    &.onlyIcon {
        width: 36px;
        height: 36px;
        padding: 0;
    }

    svg {
        font-size: 1rem;
        flex-shrink: 0;
    }
}

@mixin button-type($type-name, $type-map) {
    &-#{$type-name} {
        color: map-get($type-map, color);
        background-color: map-get($type-map, background);

        &:hover:not(:disabled):not([aria-busy="true"]) {
            background-color: map-get($type-map, hover-background);
            color: map-get($type-map, hover-color);
        }
    }
}

@mixin button-outline-type($type-name, $outline-map) {
    &-outline-#{$type-name} {
        color: map-get($outline-map, color);
        background-color: transparent;
        border: 1px solid map-get($outline-map, border-color);

        &:hover:not(:disabled):not([aria-busy="true"]) {
            background-color: map-get($outline-map, hover-background);
            color: map-get($outline-map, hover-color);
            transform: none;
        }
    }
}

@mixin button-size($size-name, $size-map) {
    &-#{$size-name} {
        padding: map-get($size-map, padding);
        font-size: map-get($size-map, font-size);

        svg {
            font-size: map-get($size-map, svg-size);
        }
    }
}

.btn {
    @include button-base;

    @each $type, $properties in $button-types {
        @include button-type($type, $properties);
    }

    @each $outline-type, $properties in $button-outline-types {
        @include button-outline-type($outline-type, $properties);
    }

    @each $size, $properties in $sizes {
        @include button-size($size, $properties);
    }

    .btn-label {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        line-height: 1.5;
    }
}
